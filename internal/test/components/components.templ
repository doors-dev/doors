package components

import (
	"github.com/doors-dev/doors"
	"github.com/doors-dev/doors/internal/test"
)

templ head(b doors.SourceBeam[test.Path]) {
	@doors.Head(b, func(p test.Path) doors.HeadData {
		if p.Vh {
			return doors.HeadData{
				Title: "home",
				Meta: map[string]string{
					"description": "Welcome to the home page",
					"keywords":    "home, main, index",
					"og:title":    "Home Page",
				},
			}
		}
		if p.Vs {
			return doors.HeadData{
				Title: "s",
				Meta: map[string]string{
					"description": "String page description",
					"category":    "text-content",
				},
			}
		}
		return doors.HeadData{
			Title: p.P,
			Meta: map[string]string{
				"description": "Page for parameter: " + p.P,
				"keywords":    "param, " + p.P,
				"og:title":    "Param: " + p.P,
				"author":      "Parameter Author",
			},
		}
	})
}

type LinksFragment struct {
	test.NoBeam
	Param string
}

templ (f *LinksFragment) Render() {
	@doors.AHref{
		Model: test.Path{
			Vh: true,
		},
	}
	<a id="home">home</a>
	@doors.AHref{
		Model: test.Path{
			Vp: true,
			P:  f.Param,
		},
	}
	<a id="param">param</a>
	@doors.AHref{
		Model: test.Path{
			Vs: true,
			P:  f.Param,
		},
	}
	<a id="string">string</a>
}
