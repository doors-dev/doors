package test

import (
	"github.com/doors-dev/doors"
	"github.com/doors-dev/gox"
)

type NoBeam struct{}

func (f NoBeam) setBeam(_ doors.Source[Path]) {}

type Path struct {
	Vh bool `path:""`
	Vs bool `path:"/s"`
	Vp bool `path:"/s/:P"`
	P string
}

type Fragment interface {
	setBeam(b doors.Source[Path])
	gox.Comp
}

type Page struct {
	F Fragment
	H elem(doors.Source[Path]) 
	Header string
}

func (p *Page) h1() string {
	return p.Header
}

func (p *Page) head(b doors.Source[Path]) gox.Elem{
	if p.H == nil {
		return nil
	}
	return p.H(b)
}

elem (p *Page) content(b doors.Source[Path]) {
	~(if p.F != nil {
		~{
			p.F.setBeam(b)
		}
		~(p.F)
	})
}

elem (p *Page) Main(b doors.Source[Path]) {
	~(Document(p, b))
}
